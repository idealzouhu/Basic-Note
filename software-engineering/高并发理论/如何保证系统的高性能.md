## Java 程序性能提升

### 并发处理

多线程并发处理，通过多线程将串行逻辑并行化。 

锁选择，读多写少的场景读写锁，以空间换时间。在争用激烈场景中，通过分段锁的方式 减少争用。 

尽量使用无锁编程，比如ThreadLocal、JUC并发包、Reactor模式都属于无锁编程方案。



### JVM 调优

JVM优化，尽可能减少GC频率和耗时，这里涉及新生代和老年代的大小、GC算法的选择等。





### IO 处理

减少IO次数，比如批量读写数据库、批量读写缓存、批量调用RPC的接口。

减少IO时的数据包大小，包括采用轻量级的通信协议、合适的数据结构、去掉接口中的多 余字段、减少缓存key的大小、压缩缓存value等。





### 池化技术

**资源池**：使用资源池来管理系统中的资源，包括数据库连接池、线程池、进程池、对象池、内存池、连接池、协程池等(**池化技术**)。资源池可以有效地管理系统中的资源并提高资源的重用率，从而降低系统的开销。

各种池化技术的使用和池大小的设置，包括数据库连接池、HTTP请求池、线程池（考虑 CPU密集型还是IO密集型设置核心参数）、Redis连接池等





## 其他方案

### 高性能缓存

缓存根据性能由高到低分为：寄存器、L1缓存、L2缓存、L3缓存、本地内存、分布式缓存

上层的寄存器、L1 缓存、L2 缓存是位于 CPU 核内的高速缓存，访问延迟通常在 10 纳秒以下。L3 缓存是位于 CPU 核外部但在芯片内部的共享高速缓存，访问延迟通常在十纳秒左右。高速缓存具有成本高、容量小的特点，容量最大的 L3 缓存通常也只有几十MB。

本地内存是计算机内的主存储器，相比 CPU 芯片内部的高速缓存，内存的成本要低很多，容量通常是 GB 级别，访问延迟通常在几十到几百纳秒。

内存和高速缓存都属于掉电易失的存储器，如果机器断电了，这类存储器中的数据就丢失了。



常用的解决策略主要有：

- **异步处理**：将一些耗时的操作或者不需要即时返回结果的操作进行异步处理。通过**消息队列**或者任务队列来缓冲和异步处理请求，从而降低系统的压力，提高系统的响应速度和吞吐量。
- **CDN 和全站加速**
- **数据库优化**
- 缓存







### 参考资料

[“软件系统三高问题”高并发、高性能、高可用系统设计经验-阿里云开发者社区 (aliyun.com)](https://developer.aliyun.com/article/979134#:~:text=软件开发通常会提到一个名词 "三高"，即高并发、高性能、高可用。 具体的指标定义，如：高并发方面要求QPS 大于,10万；高性能方面要求请求延迟小于 100 ms；高可用方面要高于 99.99%。)