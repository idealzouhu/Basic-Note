## 一、软件三高

软件三高主要包括 高并发 、 高性能 、高可用

**高并发（High Concurrency）**：系统能够同时处理大量的并发请求或任务的能力

**高性能（High Performance）**：系统在单位时间内完成更多的工作，提高系统的响应速度、吞吐量和处理能力。

**高可用性（High Availability）**：系统能够持续地提供服务，即使在面对各种故障和异常情况时也能够保持稳定运行。

需要注意的是，软件三高的部分解决策略是相同的。



## 二、高并发

高并发（High Concurrency）是互联网分布式系统架构设计中必须考虑的因素 之一，它通常是指通过设计保证系统能够同时并行处理多个请求。

### 2.1 评价指标

#### 2.1.1 吞吐量（秒级别时间维度）

吞吐量是指系统在单位时间内处理请求的数量。简单地从数据量的维度来说，吞吐量与响应时间成严格的反比关系，吞吐量越大，响应时间越小。吞吐量的度量指标大致如下：

- **QPS（Queries Per Second，每秒查询数）**：系统每秒能够处理的查询请求的数量。查询通常是指从数据库中读取数据的操作，但在更广泛的上下文中，它也可以指任何类型的读请求。

- **TPS(Transactions Per Second，每秒事务数)**：系统每秒能够处理的事务的数量。事务不仅包括修改类型的请求，还会包含查询类型的请求。

QPS 和 TPS 虽然都涉及系统每秒处理的请求数，但 **QPS 侧重于读操作的性能，而 TPS 则涵盖了读写操作的综合性能**。



#### 2.1.2 访问量（日时间级别维度）

具体的度量指标有：

- **日PV（Page View，页面浏览量）**：用户在一内对网站的页面访问总次数。每当用户打开一个页面，PV 就会增加一次。

- **日UV （Unique Visitor，独立访客）**: 指的是独立访客数量，即在一天内访问网站的不同用户数。

- **平均页面浏览量（Average Page Views per Visitor）**：PV 除以 UV，表示每个独立访客平均浏览的页面数量。这个指标可以反映用户对网站内容的深度兴趣。

PV 用于衡量网站或页面的受欢迎程度， UV 用于分析网站的用户覆盖面和用户基础





### 2.2 策略

常用的解决策略主要有：

- **水平扩展（Horizontal Scaling）**：通过增加服务器实例(**集群化部署**)来处理更多的并发请求。水平扩展可以通过**负载均衡**器将请求分发到不同的服务器上，从而提高系统的整体处理能力。
- **异步处理**：将一些耗时的操作或者不需要即时返回结果的操作进行异步处理。通过**消息队列**或者任务队列来缓冲和异步处理请求，从而降低系统的压力，提高系统的响应速度和吞吐量。
- **缓存**：使用缓存来存储频繁访问的数据或者计算结果，减少对后端存储系统的访问压力(**冷热分离**思想)。缓存可以极大地提高系统的性能和吞吐量，同时减少对底层资源的消耗。
- **数据库优化**：对数据库进行优化，包括优化查询语句、建立合适的索引、使用数据库分区等技术来提高数据库的性能和并发能力。
- **限流和熔断**：通过限流和熔断机制来控制系统的并发请求量，防止系统被过多的请求压垮。可以根据系统的负载情况动态地进行限流和熔断，保护系统的稳定性和可用性。
- **分布式架构**：采用分布式架构来构建系统，将系统拆分为多个独立的服务，通过服务间的异步通信来实现业务逻辑。分布式架构可以有效地提高系统的可伸缩性和容错性，从而更好地应对高并发的挑战。



## 三、高性能

### 3.1 评价指标

请求延迟

响应时间 **RT(Response-time)就是用户发出请求到用户收到系统处理结果所需要的时间。**





## 四、高可用

高可用性指的是系统在长时间运行中能保持正常服务的能力。高可用性通常用来衡量系统的可靠性和稳定性，确保系统能够在大多数情况下正常运行，而不会因故障或错误而停机。

### 4.1 评价指标

#### 4.1.1 服务等级协议

高可用指标主要使用 SLA。

- MTBF（Mean Time Between Failure）： 系统可用时长

- MTTR（Mean Time To Repair）：系统从故障后到恢复正常所耗费的时间

- SLA（Service-Level Agreement）：服务等级协议，用于评估服务可用性等级。计算公式是 
  $$
  SLA = MTBF/(MTBF+MTTR)
  $$
  





#### 4.1.2 错误率

错误率指的是响应结果的错误比例。具体的公式为
$$
\text{错误率} = \frac{\text{错误的请求的数量}}{\text{请求的总数}}
$$


一般来说，错误率要在万分之一以下。









## 参考资料

[高可用和高性能系统设计指南 | JavaGuide](https://javaguide.cn/high-availability/high-availability-system-design.html) （给出高可用和高性能的常用解决方案）