# 一、红黑树

## 1.1 红黑树

红黑树（Red-Black Tree）是一种**自平衡的二叉查找树**，它在插入和删除操作时通过执行一系列的旋转和操作来维变色持其平衡性。由于红黑树的自平衡性，红黑树保证了**最坏情形下在 O(logn) 时间复杂度内完成查找、增加、删除等操作**，性能表现稳定。

红黑树在符合二叉查找树的基本特性的同时，还具有以下附加特性：

1. 节点是红色或黑色。

2. 根节点是黑色。

3. 每个叶子节点都是黑色的空节点（NIL节点）。

4. 每个红色节点的两个子节点都是黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)

5. 从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。

由于这些附加的特性，红黑树保证其平衡性，**从根到叶子的最长路径不会超过最短路径的两倍**，即 2log(n+1)





## 1.2 为什么引入红黑树

引入红黑树的主要原因是为了<font color="red">**解决二叉查找树的缺陷**</font>，保持二叉查找树的平衡性，以确保在最坏情况下的时间复杂度仍然是O(log n)。

二叉查找树的缺陷是：在某些特定的插入和删除顺序下，**二叉搜索树可能会退化为线性结构**，即一个链表，导致操作的时间复杂度从 O(logn) 变为 O(n)





## 1.3 红黑树的应用

红黑树（Red-Black Tree，以下简称RBTree）的实际应用非常广泛，比如

- Linux内核中的完全公平调度器、高精度计时器、ext3文件系统等等，
- 各种语言的函数库如Java的 TreeMap 和 TreeSet，C++ STL 的 map、multimap、multiset 等。

 





# 二、红黑树自平衡调整

当插入或者删除节点的时候，红黑树的规则可能会被打破。我们这时候就需要调整，维护红黑树的规则，从而保证红黑树的自平衡性。

调整操作主要有：

- 变色：为了重新符合红黑树的规则，尝试把红色节点变为黑色，或者把黑色节点变为红色。
- 旋转：旋转包括左旋转和右旋转。区分左旋和右旋的方法是：待旋转的节点从左边上升到父节点就是右旋，待旋转的节点从右边上升到父节点就是左旋。

至于如何使用变色和旋转操作，查看 [红黑树深入剖析及Java实现 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/24367771)







# 三、参考资料

[红黑树深入剖析及Java实现 - 知乎 ](https://zhuanlan.zhihu.com/p/24367771)  （提供了具体的调整操作，并且给出相应代码）

[漫画：什么是红黑树？ - 掘金 (juejin.cn)](https://juejin.cn/post/6844903519632228365#comment)