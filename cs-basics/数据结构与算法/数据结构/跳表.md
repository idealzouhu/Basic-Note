### 什么是跳表

跳表是一种<font color="blue">**基于有序链表的数据结构，通过引入多个层次的链表来加速搜索操作**</font>。每一层都是一个**有序链表**，下面的层次链接到上面的层次，形成一个跳跃的结构。

**跳表是一种利用空间换时间的算法**，查找、插入和删除的复杂度都为  $O(log⁡ n)$

从某种程度上来说，这个有点类似于二分查找。

<img src="images/93666217.jpg" alt="2级索引跳表" style="zoom:80%;" />





### 跳表查询过程

跳表的查询过程主要依赖于从高层到低层逐步查找，**通过跳跃的方式减少需要检查的节点数量**，从而实现 $O(log⁡n)$  的查找时间复杂度。

跳表内的所有链表的元素都是排序的。查找时，可以从顶级链表开始找。一旦发现被查找的元素大于当前链表中的取值，就会转入下一层链表继续找。这也就是说在查找过程中，搜索是跳跃式的。

<img src="images/32005738.jpg" alt="在跳表中查找元素18" style="zoom:80%;" />



在原始链表中，查找 18 的遍历次数为 18 次。在跳表中，查找 18 的遍历次数为 7 次。由此可见，跳表对查询性能的提升。





### 如何确定跳表的层数

跳表在创建节点时候，会生成范围为[0-1]的一个随机数，如果这个随机数小于 0.25(相当于概率25%)，那么层数就增加1层，然后继续生成下一个随机数，直到随机数的结果大于 0.25 结束，最终确定该节点的层数。

具体细节查看 [Redis面试题 | 小林coding (xiaolincoding.com)](https://xiaolincoding.com/interview/redis.html#跳表是怎么实现的)





### 跳表的使用场景

在 Redis 中，Zset 的底层数据结构就是用跳表实现的。







### 跳表和B+树的区别

**跳表**适合于需要动态调整、实现简单且内存开销相对较小的应用场景。跳表的随机性使得其性能在大多数情况下都能保持较好。

**B+ 树**更适合于磁盘存储和范围查询操作，例如数据库系统。B+ 树的结构有助于减少磁盘I/O操作，且对范围查询有天然的支持。



其中，最重要的区别在于：

- B+ 树更新操作的代价比跳表更大。
- 跳表实现难度较小。





### 参考资料

[Java 常见并发容器总结 | JavaGuide](https://javaguide.cn/java/concurrent/java-concurrent-collections.html#concurrentskiplistmap)

[Redis为什么用跳表实现有序集合 | JavaGuide](https://javaguide.cn/database/redis/redis-skiplist.html#跳表在-redis-中的运用)