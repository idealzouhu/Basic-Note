
## 缓存穿透、缓存击穿和缓存雪崩

[Redis常见面试题总结(下) | JavaGuide](https://javaguide.cn/database/redis/redis-questions-02.html#缓存穿透)

- 缓存穿透是指查询一个不存在的数据，导致缓存和数据库中都没有该数据的情况
- 缓存击穿是指一个存在的热点数据突然过期失效，导致大量请求同时访问这个缓存项，直接访问数据库，可能引起数据库压力过大。
- 缓存雪崩是指缓存中大量数据在同一时间内过期失效，导致大量请求直接访问数据库，可能引起数据库压力过大，甚至导致数据库宕机。

|          | 缓存击穿                                                     | 缓存雪崩                                                     | 缓存穿透                                                   |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ---------------------------------------------------------- |
| 定义     | 一个存在的热点数据突然过期失效，导致大量请求同时访问这个缓存项，直接访问数据库，可能引起数据库压力过大。 | 缓存中大量数据在同一时间内过期失效，导致大量请求直接访问数据库，可能引起数据库压力过大，甚至导致数据库宕机 | 查询一个不存在的数据，导致缓存和数据库中都没有该数据的情况 |
| 解决方案 | - 设置热点数据过期时间<br>- 热点数据预热<br>- 分布式锁（双重判定锁） | - 设置热点数据过期时间<br/>- 热点数据预热<br/>- 接口限流     | - 缓存无效key<br>- 布隆过滤器<br>- 接口限流                |
| 发生原因 | 热点数据过期                                                 | - 热点数据过期<br>- Redis 服务不可用<br>                     | 黑客攻击                                                   |

注意：接口限流在三种情况里面都可以使用，数据预热方案在缓存击穿和缓存雪崩中也可以通用。





#### [缓存雪崩和缓存击穿有什么区别？](https://javaguide.cn/database/redis/redis-questions-02.html#缓存雪崩和缓存击穿有什么区别)

缓存雪崩和缓存击穿比较像，但缓存雪崩导致的原因是缓存中的大量或者所有数据失效，缓存击穿导致的原因主要是某个热点数据不存在与缓存中（通常是因为缓存中的那份数据已经过期）。