分布式事务是通过并发控制来实现隔离性。

并发控制是一种隔离并发事务以保证数据正确性的机制。不同的并发控制机制用来实现不同的隔离级别，并发控制机制主要分为以下几类：

- **悲观并发控制**：使用锁来防止并发事务对数据的干扰，以实现串行化的隔离级别。事务在使用任何数据之前，**悲观**地认为会有事务争抢，于是需要先获取数据的锁。
- **乐观并发控制**：**乐观**地认为并发事务(尤其是并发写操作)是小概率事件，于是到事务结束时再检查事务是否正确。
- **多版本并发控制**：对每个数据项保存多个版本的数据，并保证每个事务的读操作读取到比该事务早的最后一次提交的数据。



| **并发控制机制**   | **基本思想**                                             | **锁机制**             | **适用隔离级别**       | **优点**                                         | **缺点**                                           |
| ------------------ | -------------------------------------------------------- | ---------------------- | ---------------------- | ------------------------------------------------ | -------------------------------------------------- |
| **悲观并发控制**   | 假设并发事务会争抢数据，事务在使用数据之前需要获取锁。   | 使用锁（如行锁、表锁） | 可以实现串行化隔离级别 | 确保数据一致性，适用于高竞争环境。               | 可能导致锁争用、死锁，影响系统性能。               |
| **乐观并发控制**   | 认为并发事务争抢的概率较小，到事务结束时再检查是否冲突。 | 无显式锁机制           | 支持大部分隔离级别     | 在低冲突环境下性能较高，不需要频繁加锁。         | 在冲突频繁时可能会导致事务重试和性能下降。         |
| **多版本并发控制** | 为每个数据项保存多个版本，读操作总是读取最后提交的数据。 | 无显式锁机制           | 可以实现串行化隔离级别 | 高并发环境下性能较好，不需要加锁，读操作不阻塞。 | 存储开销较大，写操作可能会产生额外的版本管理开销。 |

