# 头文件和源文件的理解

头文件(.h文件)通常用作函数声明，变量声明，常数定义，宏的定义等等



定义和声明是不同的。定义只能出现一次，而声明可以出现多次。





> 从C编译器角度看，.h和.c皆是浮云，就是改名为.txt、.doc也没有大的分别。换句话说，就是.h和.c没啥必然联系。.h中一般放的是同名.c文件中定义的变量、数组、函数的声明，需要让.c外部使用的声明。这个声明有啥用？只是让需要用这些声明的地方方便引用。因为 #include "xx.h" 这个宏其实际意思就是把当前这一行删掉，把xx.h 中的内容原封不动的插入在当前行的位置。由于想写这些函数声明的地方非常多（每一个调用 xx.c 中函数的地方，都要在使用前声明一下子），所以用 #include "xx.h" 这个宏就简化了许多行代码——让预处理器自己替换好了。也就是说，xx.h 其实只是让需要写 xx.c 中函数声明的地方调用（可以少写几行字），至于 include 这个.h 文件是谁，是 .h 还是 .c，还是与这个 .h 同名的 .c，都没有任何必然关系。
>
> 将头文件的后缀改成 xxx.txt，然后在引用该头文件的地方用 #include "xxx.txt", 编译，链接都很顺利的过去了，由此可知，头文件仅仅为阅读代码作用，没其他的作用了



# 案例

举个例子，定义 头文件 test.h

## test.h

```
#ifndef test   //避免重复定义test.h 头文件
#define test

//宏定义
#define stages  6

//结构体声明
typedef struct{
	int num；
}vertex

//函数声明
//声明函数加不加extern都没关系，程序默认加extern
void func(
	int  flag;
);

//变量声明
//注意：如果变量前面没有extern，则该变量会被定义，而不是声明
//extern是C语言中的一个关键字，一般用在变量名前或函数名前，作用是用来说明“此变量/函数是在别处定义的，要在此处引用”
extern int a；

#endif




```





# 遇到问题

问题一： extern修饰全局变量正确用法和链接错误

解决方案：定义extern修饰的变量时，要做到作用域匹配，就是说，现在在头文件里声明了变量，之后要定义就**只能在函数的外部定义变量**，否则会报错该变量不能被解析（就等于你没有定义它）





**头文件全局变量前面不加extern ，好像没有什么影响**