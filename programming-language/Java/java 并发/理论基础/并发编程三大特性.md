## 一、原子性

### 1.1 什么是原子性

原子性指的是一个操作要么全部完成，要么完全不执行，不会被其他线程打断。在多线程环境中，原子性确保了某个操作的不可分割性。



### 1.2 **实现方式**

原子性主要是通过锁来实现的，具体解决方案有：

- 使用**互斥锁**（Mutex）或**信号量**（Semaphore）来保护临界区。
- 使用 CAS 算法，调用了底层 CPU 指令 `cmpxchg`。例如，使用 `java.util.concurrent.atomic` 包中的原子类来实现原子操作。



## 二、可见性

### 2.1 定义

可见性指的是一个线程对共享变量的修改能被其他线程及时看到。在多线程程序中，如果一个线程修改了共享变量，其他线程必须能够立即看到这个变化。

在理解可见性之前，我们应该了解 [Java 内存模型](https://javaguide.cn/java/concurrent/jmm.html#jmm-是如何抽象线程和主内存之间的关系)。



### 2.2 实现方式

要想解决多线程的内存可见性问题，**所有线程都必须将共享变量刷新到主内存**。具体解决方案有：

- 使用 `volatile` 关键字：在变量声明时加上 `volatile`，可以确保该变量的修改对所有线程可见。
- 使用 **内存屏障** 或 **缓存一致性协议**（在硬件层面上）确保数据的一致性。

最简单的方案是使用 Java 提供的关键字 `volatile` 修饰共享变量。



### 2.3 为什么局部变量不存在内存可见性问题

为什么 Java 局部变量、方法参数不存在内存可见性问题？在Java中，所有的局部变量、方法定义参数不会在线程之间共享，所以也就不会有内存可见性的问题。所有的Object 实例、Class实例和数组元素都存储在 JVM堆内存中，堆内存在线程之间共享，所以存在可见性问题



## 三、有序性

### 3.1 定义

有序性指的是指令的执行顺序与程序中代码的编写顺序一致。在单线程程序中，指令是按顺序执行的，但在多线程环境中，编译器、处理器和优化可能会改变指令的执行顺序。



### 3.2 实现方式

- 使用 `synchronized`  关键字：在方法或代码块上加锁，可以强制内存的有序性。
- 使用 `volatile` 关键字：禁止指令重排，保证对 `volatile` 变量的读写有序。





### 参考资料

《 极致经典（卷2）：Java高并发核心编程(卷2 加强版) -特供v21-release》

[并发编程三个重要特性 | JavaGuide](https://javaguide.cn/java/concurrent/jmm.html#再看并发编程三个重要特性)